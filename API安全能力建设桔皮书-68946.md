# 声明 
本文是学习[API安全能力建设桔皮书. ](https://siduwenku.com/view/468?f=new_2023)而整理的学习笔记,分享出来希望更多人受益,如果存在侵权请及时联系我们
# 围绕API安全构建全新数据安全体系  
  
## 场景变化带来的防护难点  
  
云原生关注快速开发和部署，这种特性要求进行防护模式的转变，从基于边界的防护模式迁移到更接近基于资源属性和元数据的动态工作负载的防护模式，从而有效识别并保护工作负载，以满足云原生技术架构的独特属性和应用程序的规模需求，同时适应不断变化的新型安全风险。  
  
应用架构发展的6个过程中，传统防护手段主要基于硬件形态部署，考虑的都是南北向的流量，而在应用技术架构高速发展的过程中，难以适应东西向、软件化、服务化的场景。  
  
## 新技术、新业务带来的防护难点  
  
API当前主要基于HTTP/S协议，为此传统的Web攻击防护手段仍能在一定程度上起到防御作用。比如攻击者针对API接口的参数进行SQL注入，传统的基于规则的检测手法仍然有效。考虑到API交互数据敏感性及提供服务的敏感性，API安全防护方案应该在传统安全的基础上更加关注与数据安全、权限安全及用户行为安全。  
  
新的安全防护模型在检测传统Web攻击同时，还应检测与预警API传输中的敏感数据；建立基于用户访问行为的用户画像或行为模型；检测与预警API未认证访问、弱口令登录、未授权访问、异常访问行为等。此外，应具有基于自动化发现并可视化展示及管理API能力，及时发现与预警僵尸、未知等异常API，以及避免在API设计之初由于缺乏统一规范导致后期大量API无法统一管理而引入的安全问题。新的安全防护模型还应具有高兼容性，在具体实践时不仅兼顾用户业务多样化，还应在不干扰业务的前提下，通过高度可自定义及自学习等手段高度融合到用户业务中。  
  
## API格式的多样性、复杂性面临的防护难点  
  
在API业务发展历程中，协议从HTTP1.0发展到HTTP3.0，为了适应各种业务场景，API格式主要包含REST、SOAP、GRPC、GraphQL、用户自定义格式等。  
  
安全的具体实践一直与业务紧密联合，针对协议、格式的快速发展，传统防护思路难以适应协议、格式的快速变化，为此，与API技术相适应的网络安全方案也应考虑其作为数据传输载体及服务接口的本质。  
  
## 传统防护手段无法应对API安全风险  
  
### 传统业务特点  
  
业务、应用被Web化，业务系统部署在可公共访问的Web服务上，有着清晰的物理和逻辑边界；此时主要是以解决Web应用安全为主，整体解决方案以端、网、云的纵深防护体系为主。  
  
### 未来业务发展趋势  
  
1）随着移动化、数字化业务的使用，业务层面主要以多层架构为主，新的架构设计过程如下：  
  
第一步，结合现实情况，将系统划分成多个层次。  
  
第二步，确定层与层之间的关系，将层与层之间的交互接口梳理出来。  
  
第三步，将功能相近的接口划归到一个模块，确保模块高内聚，对外低耦合。  
  
第四步，在此基础上进一步明确接口的参数列表。  
  
![siduwenku.com 专注免费分享高质量文档](http://public.host.github5.com/media/f19bd5f956b1db199948df19f5957d3c.png)  
  
为了更好地适应泛终端场景，同时为了解决交互的便利性，所有业务通信都被设计成API化。  
  
2）按照这套方法论来进行架构设计，最理想的情况是将业务系统分成多层。首先应该先切在业务和领域之间，即通过API把两边解耦。交互和业务跟用户关联度高，经常随需求变化而改动，而领域和资源相对比较稳定。  
  
3）考虑到要完成某些业务功能，系统可能需要调用外部系统协同完成，为了保证领域层相对稳定，我们需要隔绝外部系统或数据持久层变化带来的影响，因此应该切在领域和资源之间。  
  
4）考虑到同样的一个业务可能会有多套界面，例如有Web版、桌面版、移动版等，为了提高重用率，隔离变更，那接下来要把交互和业务切开。  
  
随着云应用的发展、基础设施必须满足快速、灵活的扩展，同时不影响现有业务，因此出现了微服务化、服务网格化的趋势。  
  
### 传统的边界防护模型难以应对新的安全风险  
  
**防护模型发生变化：** 传统基于边界的防护模型已不能完全满足云原生中API的安全需求，云原生关注快速开发和部署，这种特性要求进行防护模式的转变，从基于边界的防护模式迁移到更接近基于资源属性和元数据的动态工作负载及API暴露面的防护模式，从而有效识别并保护工作负载，以满足云原生技术架构的独特属性和应用程序的规模需求，同时适应不断变化的新型安全风险。  
  
**防护维度发生变化：** 随着微服务的增多，暴露的端口和API接口数量也急剧增加，进而扩大了攻击面，且微服务间的网络流量多为东西向流量，网络安全防护维度发生了改变。微服务通信依赖于API，随着业务规模的增大，微服务API数量激增，恶意的API操作可能会引发数据泄漏、越权访问、中间人攻击、注入攻击、拒绝服务等风险；最后，微服务治理框架采用了大量开源组件，会引入框架自身的漏洞以及开源治理的风险。  
  
### API安全防护体系变成全新的形态  
  
传统业务承载体是以网络通信和网络协议为基础，通信载体以路由、交换为主体；安全防护体系的技术基础是以网络协议为主体，以端、网、云为边界的纵深防御体系。在数据安全领域，以API为业务载体，API等同于传统业务场景下的网络协议。  
  
在以API为载体的业务场景下，因为API直通业务系统内部，因此系统的暴露面被无限放大，攻击手段也随之发生变化，因此传统的安全防护体系以及防护技术无法解决新的安全问题。  
  
网络安全时代，攻击者以破坏为主；数据安全时代，攻击者以窃取和盗取数据为主，因此安全的可视化、行为可视化、API之间业务关系可视化、API资产可视化是需要解决的主要问题。无论是在南北向还是东西向要缩小API暴露面、关闭攻击面，必须以上做到4个可视化。由于微服务和服务网格化的特点，要想解决以上问题，安全要做到和业务紧密结合，同时在部署形式上又要能够解耦。因此只能通过内生安全的形式去解决数据安全领域中的API安全问题。  
  
# API安全防护要求与建议  
  
在云计算和大数据时代，网络安全边界逐渐瓦解，内外部威胁愈演愈烈，导致传统的边界安全架构正在失效，面对如此严峻的“内忧外患”，安全思维和安全架构亟需进化，数据安全中的API安全应不断地创新与迭代，建设真正意义上的、更满足数据安全体系下的API安全解决方案  
  
企业应基于业务场景的人、流程、访问、环境等多维的因素，对信任进行评估，并通过信任等级对权限进行动态调整，这是一种动态自适应的安全闭环体系。  
  
API安全建设的落地需要结合现状和需求，以零信任的核心思想设计API的安全能力和组件，并嵌入到业务体系，构建自适应的内生安全机制，建议在业务建设之初进行同步规划，进行安全和业务的深入聚合。  
  
API安全解决方案应按照持续“发现”、“检测”、“防护”、“响应”的安全模型进行安全建设。  
  
![siduwenku.com 专注免费分享高质量文档](http://public.host.github5.com/media/df55443e93dca5baff6f8c729df682f1.png)  
  
## 持续构建发现能力  
  
### API资产发现与管理  
  
API自动发现能力  
  
API发现能力是API提供者和黑客之间的竞赛，他们在发现API时很容易利用这些API。要在攻击者之前发现API，可以挖掘API流量元数据。这些数据是从API安全网关、负载平衡器或直接内联网络流量中提取的。  
  
### API资产管理能力  
  
对API进行深度的资产梳理和发现，对于帮助安全团队了解不同应用程序使用的API以及API对应的业务属性。  
  
### API漏洞发现  
  
### 自身业务漏洞发现  
  
随着攻击面的变化及攻击者手段的隐秘多变，企业应建设持续挖掘、收集API相关漏洞的能力和机制，并做好补丁管理。  
  
### 第三方组件漏洞发现  
  
企业应在引入第三方组件时充分考虑组件自身安全，避免第三方组件引入的漏洞。  
  
### API滥用发现  
  
在API运行时加强外部风险感知能力和风险阻断能力的建设尤为重要，这样才能够及时准确地感知到API的任何滥用情况，并及时阻断攻击者的进一步行动。  
  
## 持续构建检测能力  
  
1.  **针对API漏洞攻击检测**   
  
企业应通过攻击检测技术持续检测针对API漏洞的攻击行为，并通过大数据分析技术及人工智能技术对攻击告警进行攻击事件还原和攻击溯源。  
  
1.  **逻辑异常攻击检测**   
  
企业应构建API调用链可视化能力，将请求经过的每一个节点都记录下来，形成一个完整的调用链监控系统。一旦发生请求调用异常或回溯安全事件时，即可清晰定位到具体环节。  
  
1.  **异常行为检测**   
  
企业应构建异常行为可视化能力，基于可扩展的行为检测模型，实现对异常高频访问行为、异常数量级数据访问行为、异常时间访问等异常行为实现全面可视化。  
  
1.  **数据异常流转及泄漏检测**   
  
#### 敏感数据识别  
  
企业应进行数据分级分类治理，并通过技术手段对API访问的数据进行持续监测评估，自动梳理API接口中的敏感数据流并生成API接口与敏感数据映射，确保个人隐私数据、商业数据以及其他敏感数据进行持续监控。  
  
#### 数据流转检测  
  
企业应构建全面的数据流转监控，通过识别各种类型的API，对API的传输内容进行还原、对其传输内容进行精细化检测来达到“谁通过什么方式的API，传输了什么类型的敏感数据”的检测效果，实现敏感信息流转可视化。  
  
1.  **失陷主机检测**   
  
企业应构建威胁情报检测能力，通过检测分析手段，快速定位攻击行为，并对攻击行为进行溯源，做到在攻击行为产生恶劣影响之前及时感知已失陷的主机，从而做到提前预警及快速响应，以降低恶意攻击行为对内网造成更多的影响和损失，及时止损。  
  
## 持续构建防护能力  
  
1.  **认证授权体系**   
  
企业应基于零信任安全架构构建防护体系，实现统一的认证授权， 对所有的API内部、外部访问执行可信认证策略。  
  
1.  **访问控制**   
  
认证成功后，还需针对不多的应用执行不同的访问控制策略，并提供完整的访问控制日志。  
  
1.  **加解密能力**   
  
企业应对敏感信息的交互进行加密，在整个业务流量交互过程中，特殊的敏感信息需要被加密或做脱密处理，例如身份证号、部分姓名，银行卡号、交易号等，以减少敏感信息的泄漏风险。  
  
1.  **API限流限速**   
  
企业应对API请求执行一定的限流策略，考虑到系统的处理能力，需要对API请求做一定的限流防护。此类场景可以用于缓解基于API的DDoS攻击，有效防止资源消耗在无意义或恶意的API请求上。  
  
## 持续构建响应能力  
  
1.  **漏洞管理与响应**   
  
企业应构建漏洞管理与响应机制，需建设持续挖掘、收集API相关漏洞的能力来实现漏洞可视化，并做好补丁管理，以此来应对不断变化的攻击面及隐秘多变的攻击手段。  
  
1.  **威胁分析与处置**   
  
企业应构建威胁分析与处置能力，需要具备将所有威胁日志转发至统一的大数据分析平台，结合业务与应用部门的数据，实现对所有API的统一监控与威胁事件感知，以达到可快速处置威胁事件的目的。  
  
1.  **威胁预警能力**   
  
在数据安全空间，攻击、窃密团伙发展出多元化、不同目的、不同量级的攻击/窃密反馈、持续定点攻击/窃密、攻击意图等特征。  
  
企业应具备在攻击或窃密事件发生前具备预警能力，进而提前预防、及时响应。可从业务流量中细化攻击的行为结合攻击者历史情报信息对攻击者的资源、手法、意图、团伙情况、潜在目标进行关联跟踪分析，进而构建攻击者情报库，对攻击者进行持续跟踪。  
  

# 延伸阅读 
 更多内容 可以[ API安全能力建设桔皮书. ](https://siduwenku.com/view/468?f=2023)进一步学习

# 联系我们
[DB37-T 3696-2019 职工医疗保障经办服务规范 山东省.pdf](http://github5.com/view/38610?f=new)
